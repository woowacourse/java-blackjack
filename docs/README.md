# 블랙잭 규칙

## 참여자

* [ ] 다시한번 룰 숙지 필요

**승**

* (딜러 카드 합 < 참여자 카드 합) && 참여자가 버스트가 아닌 경우
* (딜러 카드 합 == 참여자 카드 합) && (딜러 카드 수 > 참여자 카드 수) && 참여자가 버스트가 아닌 경우
* 딜러가 버스트인 경우 && 참여자가 버스트가 아닌 경우

**무**

* (딜러 카드 합 == 참여자 카드 합) && (딜러 카드 수 == 참여자 카드 수) && 참여자가 버스트가 아닌 경우

**패**

* 참여자가 버스트인 경우
* (딜러 카드 합 > 참여자 카드 합)

<br>

## 블랙잭

* 카드의 갯수가 2장이고 카드의 합이 21인 경우 블랙잭이다.

<br>

# 기능 요구 사항

* [x] 참여자 이름 입력 받는다.
    * [x] 양 끝 공백을 제거한다.
    * [x] 참여자는 쉼표(,)로 구분한다.
    * [x] null 이나 공백인 경우 예외가 발생한다.
    * [x] 쉼표로 시작시 예외가 발생한다. ex) ,pobi,jason
    * [x] 쉼표로 끝날시 예외가 발생한다. ex) pobi,jason,
    * [x] 쉼표가 연속으로 올시 예외가 발생한다. ex) pobi,,jason
    * [x] 참여자 이름이 중복시 예외가 발생한다.
* [x] 총 참여자의 수는 2이상 8이하여야 한다.

<br>

* [x] 각 참여자의 배팅 금액을 입력받는다.  
  * [x] 정수가 아닐 시 예외가 발생한다.  
  * [x] 양의 정수가 아닐 시 예외가 발생한다.

<br>

* [x] 딜러가 카드 2장을 분배하다.
    * [x] 카드는 총 6벌을 둔다. (52 * 6)
* [x] 딜러의 카드를 출력한다. (1장)
* [x] 참여자의 카드를 출력한다. (2장)

<br>

* [x] 참여자는 hit(y) / stay(n)를 선택한다.
    * [x] y, n 가 아닐시 예외가 발생한다.
* [x] 참여자가 hit을 하는 경우 현재 가지고 있는 카드를 출력한다.
* [x] 참여자가 hit을 한 적 없이 stay를 하는 경우 현재 가지고 있는 카드를 출력한다.
* [x] 카드 합이 블랙잭인 경우 블랙잭 메시지를 출력한다.
* [x] 카드 합이 21 초과시 버스트 메시지를 출력한다.

<br>

* [x] 딜러의 카드의 합을 계산한다.
* [x] 카드 내의 ACE 가 포함된 경우
    * ACE: 11
    * 11로 했을 때 카드의 합이 21을 초과한 경우 1로 계산
* [x] 17 이상이 될때까지 카드를 받는다.

<br>

* [x] 모든 참여자의 카드의 합을 계산한다.
* [x] 딜러의 승패무를 확인한다.
* [x] 참여자의 승패무를 확인한다.
* [x] 게임 결과를 출력한다.

<br>

* [ ] 딜러의 최종 수익을 계산한다.
* [ ] 참가자의 최종 수익을 계산한다.
* [x] 참가자만 블랙잭인 경우 배팅 금액의 1.5배를 받는다.
* [x] 참가자와 딜러 모두 블랙잭인 경우 배팅한 금액을 돌려받는다.
* [x] 참가자가 패한다면 배팅한 금액을 잃는다.
* [x] 참가자가 승리한다면 배팅한 금액을 받는다.

---

## 리팩터링 목록

~~추상 클래스 활용~~

* [x] 카드덱이 비었을때 꺼낸 경우 예외 발생
* [x] createEmptyPacket 메서드명 수정
* [x] 참가자의 이름 딜러 불가
* [x] Name 객체 포장하기
* [x] Result 함수형 프로그래밍 사용
* [x] TestFixture 사용
* [x] 패키지 정리
* [x] 메서드 컨벤션 작성 및 확인
* [x] final 컨벤션 통일
* [x] CardDeck 생성자 닫기

<br>

* [x] 예외 시 재입력 기능
* [x] 예외 메시지 상수화
  * 커스텀 예외 구현
* [x] CardDeck 웨어하우스로 바라보기
* [ ] ~~컨트롤러 메서드 수정하기~~
* [x] ~~Participant 추상 클래스 대신 클래스로 변경하기~~
  * 추상 클래스를 유지하고 추상 메서드 추가
